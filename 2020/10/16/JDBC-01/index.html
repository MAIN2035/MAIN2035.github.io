
<!DOCTYPE html>
<html lang="zh-CN ">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ITthreeの博客 || JDBC基本使用</title>
    <meta name="author" content="ITthree">
    <meta name="description" content="ITthreeの博客,我思故我在 ">
    <meta name="keywords" content=" ">
    <link rel="icon" href="/../images/icon.jpg">
    <link rel="stylesheet" href="/css/antd.min.css">
    
    <link rel="stylesheet" href="/css/night-theme.css">
    
    <script src="/js/vue.js"></script>
    <script src="/js/antd.min.js"></script>
<meta name="generator" content="Hexo 5.0.1"></head>

<body>

    <div id="loading"
        style="height: 100vh; width: 100%; position: fixed;display: flex;z-index: 200; justify-content: space-between;">
        <div id="loadleft" style="width: 50%;background-color: #ffffff;transition: width 0.6s ease-out;"></div>
        <div id="loadright" style="width: 50%;background-color: #ffffff;transition: width 0.6s ease-out;"></div>
        <div
            style="position: fixed; height: 100vh; width: 100%;display: flex;justify-content: center;align-items: center;">
            <div id="loadcontent"
                style="width:400px;height:400px;padding:50px;border-radius:50%;display:flex;justify-content:center;align-items:center;border:solid 10px#a3ddfb; text-align:center;opacity:1;transition:opacity 0.3s ease-out;">
                <div>
                    <h2>LOADING...</h2>
                    <p>加载过慢请开启缓存(浏览器默认开启)</p>
                    <div>
                        <img src="/dancingkitty.gif" alt="loading">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="layout">
        <transition name="into">
            <div v-show="show_page" style="display: none;">
                <div id="menu_show">
                     
<nav id="menu">
    <div class="desktop-menu">
        <a href="/">
            <span class="title">ITthreeの博客</span>
        </a>
        
        <a href="/">
            <span>
                <a-icon type="home" theme="filled" />
            </span>
            <span>home</span>
        </a>
        
        <a href="/about">
            <span>
                <a-icon type="idcard" theme="filled" />
            </span>
            <span>about</span>
        </a>
        
        <a href="/archives">
            <span>
                <a-icon type="folder" theme="filled" />
            </span>
            <span>archives</span>
        </a>
        
        <a href="/categories/ubuntu">
            <span>
                <a-icon type="book" theme="filled" />
            </span>
            <span>categories</span>
        </a>
        
        <a href="/tags/shell">
            <span>
                <a-icon type="tags" theme="filled" />
            </span>
            <span>tags</span>
        </a>
        
    </div>

    <div :class="'phone-menu ' + menu_show" id="phone-menu">
        <div :class="'title'" @click="menu_show=!menu_show">
            <span style="margin-right: 10px;">
                <a-icon type="appstore" theme="filled" />
            </span>
            <span>ITthreeの博客</span>
        </div>
        <div class="items" v-show="menu_show">
            
            <a href="/">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="home" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">home</div>
                </div>
            </a>
            
            <a href="/about">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="idcard" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">about</div>
                </div>
            </a>
            
            <a href="/archives">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="folder" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">archives</div>
                </div>
            </a>
            
            <a href="/categories/ubuntu">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="book" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">categories</div>
                </div>
            </a>
            
            <a href="/tags/shell">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="tags" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">tags</div>
                </div>
            </a>
            
        </div>
        <div class="curtain" v-show="menu_show"></div>
    </div>

</nav>
                </div>

                <div id="main">
                     
<link rel="stylesheet" href="/css/post-body.css">
<div class="article">
    <div>
        <h1>JDBC基本使用 </h1>
    </div>
    <div class="info">
        <span class="date">
            <span class="icon">
                <a-icon type="calendar" theme="filled" />
            </span>
            2020/10/16
        </span>

        
        <span class="category">
            <a href="/categories/Java">
                <span class="icon">
                    <a-icon type="book" theme="filled" />
                </span>
                Java
            </a>
        </span>
        

        

        <span class="tags">
            <span class="icon">
                <a-icon type="tags" theme="filled" />
            </span>
            
            <span class="tag">
                
                <a href="/tags/Java" style=color:#016a99>
                    Java
                </a>
            </span>
            
            <span class="tag">
                
                <a href="/tags/JDBC" style=color:#016a99>
                    JDBC
                </a>
            </span>
            
        </span>
        
    </div>

    <div class="content" v-pre>
        <p>前言：Java DataBase Connectivity  Java 数据库连接， Java语言操作数据库，是官方（sun公司）定义的一套操作所有关系型数据库的接口。各个数据库厂商去实现这套接口，提供数据库驱动jar包。我们可以使用这套接口（JDBC）编程，真正执行的代码是驱动jar包中的实现类。</p>
<ul>
<li>步骤：<ol>
<li>导入驱动jar包 mysql-connector-java-5.1.37-bin.jar<br> 1.复制mysql-connector-java-5.1.37-bin.jar到项目的libs目录下<br> 2.右键–&gt;Add As Library</li>
<li>注册驱动</li>
<li>获取数据库连接对象 Connection</li>
<li>定义sql</li>
<li>获取执行sql语句的对象 Statement</li>
<li>执行sql，接受返回结果</li>
<li>处理结果</li>
<li>释放资源</li>
</ol>
</li>
</ul>
<h1 id="Statement：执行sql的对象"><a href="#Statement：执行sql的对象" class="headerlink" title="Statement：执行sql的对象"></a>Statement：执行sql的对象</h1><h2 id="增删改查"><a href="#增删改查" class="headerlink" title="增删改查"></a>增删改查</h2><blockquote>
<ol>
<li><p>boolean execute(String sql) ：可以执行任意的sql</p>
</li>
<li><p>int executeUpdate(String sql) ：执行DML（insert、update、delete）语句、DDL(create，alter、drop)语句,即增删改查</p>
<blockquote>
<p>返回值：影响的行数，可以通过这个影响的行数判断DML语句是否执行成功 返回值&gt;0的则执行成功，反之，则失败。</p>
</blockquote>
</li>
</ol>
</blockquote>
<pre><code class="java">package cn.itcast.jdbc;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.sql.Statement;

public class TestJDBC1&amp;#123;
    public static void main(String[] args) &amp;#123;
        Statement stmt = null;
        Connection conn = null;
        try &amp;#123;
            //注册驱动
            Class.forName(&quot;com.mysql.jdbc.Driver&quot;);
            //定义sql语句
            String sql = &quot;insert into account values(null,&#39;王五&#39;,3000)&quot;;
            //获取Connection对象
            conn = DriverManager.getConnection(&quot;jdbc:mysql:///db3&quot;,&quot;root&quot;,&quot;root&quot;);
            //获取执行sql的对象Statement
            stmt = conn.createStatement();
            //执行sql
            int count = stmt.executeUpdate(sql);//此方法将返回执行后的影响行数数值,此方法用于执行增、删、改、查的sql语句
            // int count = stmt.execute(sql) ：可以执行任意的sql
            System.out.println(count);
            if(count &gt; 0)&amp;#123;
                System.out.println(&quot;添加成功！&quot;);
            &amp;#125;else&amp;#123;
                System.out.println(&quot;添加失败！&quot;);
            &amp;#125;
        &amp;#125; catch (ClassNotFoundException e) &amp;#123;
            e.printStackTrace();
        &amp;#125; catch (SQLException throwables) &amp;#123;
            throwables.printStackTrace();
        &amp;#125;finally &amp;#123;
            //释放资源
            if (stmt != null)&amp;#123;
                try &amp;#123;
                    stmt.close();
                &amp;#125; catch (SQLException throwables) &amp;#123;
                    throwables.printStackTrace();
                &amp;#125;
            &amp;#125;
            if (conn != null)&amp;#123;
                try &amp;#123;
                    conn.close();
                &amp;#125; catch (SQLException throwables) &amp;#123;
                    throwables.printStackTrace();
                &amp;#125;
            &amp;#125;
        &amp;#125;

    &amp;#125;
&amp;#125;</code></pre>
<h2 id="封装数据库表到对象"><a href="#封装数据库表到对象" class="headerlink" title="封装数据库表到对象"></a>封装数据库表到对象</h2><blockquote>
<p>ResultSet executeQuery(String sql)  ：执行DQL（select)语句</p>
<p>（可用来将表数据封装为对象并装载入集合）</p>
</blockquote>
<pre><code class="java">package cn.itcast.jdbc;

import java.sql.*;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;

public class TestJDBC3 &amp;#123;

    public List&lt;Emp&gt; findAll()&amp;#123;
        Statement stmt = null;
        Connection conn = null;
        ResultSet rs = null;
        List&lt;Emp&gt;list = null;
        try &amp;#123;
            //注册驱动
            Class.forName(&quot;com.mysql.jdbc.Driver&quot;);
            //定义sql语句
            String sql = &quot;select * from emp&quot;;
            //获取Connection对象
            conn = DriverManager.getConnection(&quot;jdbc:mysql:///db3&quot;,&quot;root&quot;,&quot;root&quot;);
            //获取执行sql的对象Statement
            stmt = conn.createStatement();
            //执行sql
            rs = stmt.executeQuery(sql);
            Emp emp = null;
            list = new ArrayList&lt;Emp&gt;();

            while (rs.next())&amp;#123;
//        * boolean next(): 游标向下移动一行，判断当前行是否是最后一行末尾(是否有数据)，如果是，则返回false，如果不是则返回true
//                        * getXxx(参数):获取数据
//                        * Xxx：代表数据类型   如： int getInt() ,    String getString()
//                        * 参数：
//                1. int：代表列的编号,从1开始   如： getString(1)
//                2. String：代表列名称。 如： getDouble(&quot;balance&quot;)

                //获取数据
                int id = rs.getInt(&quot;id&quot;);
                String ename = rs.getString(&quot;ename&quot;);
                int job_id = rs.getInt(&quot;job_id&quot;);
                int mgr = rs.getInt(&quot;mgr&quot;);
                Date joindate = rs.getDate(&quot;joindate&quot;);
                double salary = rs.getDouble(&quot;salary&quot;);
                double bonus = rs.getDouble(&quot;bonus&quot;);
                int dept_id = rs.getInt(&quot;dept_id&quot;);
                //创建Emp对象并赋值
                emp = new Emp();
                emp.setId(id);
                emp.setEname(ename);
                emp.setJob_id(job_id);
                emp.setMgr(mgr);
                emp.setSalary(salary);
                emp.setBonus(bonus);
                emp.setDept_id(dept_id);

                //装载进集合
                list.add(emp);
            &amp;#125;
        &amp;#125; catch (ClassNotFoundException e) &amp;#123;
            e.printStackTrace();
        &amp;#125; catch (SQLException throwables) &amp;#123;
            throwables.printStackTrace();
        &amp;#125;finally &amp;#123;
            //释放资源
            if (rs != null)&amp;#123;
                try &amp;#123;
                    rs.close();
                &amp;#125; catch (SQLException e) &amp;#123;
                    e.printStackTrace();
                &amp;#125;
            &amp;#125;
            if (stmt != null)&amp;#123;
                try &amp;#123;
                    stmt.close();
                &amp;#125; catch (SQLException e) &amp;#123;
                    e.printStackTrace();
                &amp;#125;
            &amp;#125;
        &amp;#125;
        return list;
    &amp;#125;
    public static void main(String[] args) &amp;#123;
       var a = new TestJDBC3();
        System.out.println(a.findAll());

    &amp;#125;
&amp;#125;</code></pre>
<h2 id="JDBC控制事务"><a href="#JDBC控制事务" class="headerlink" title="JDBC控制事务"></a>JDBC控制事务</h2><ol>
<li>事务：一个包含多个步骤的业务操作。如果这个业务操作被事务管理，则这多个步骤要么同时成功，要么同时失败。</li>
<li>操作：<ol>
<li>开启事务</li>
<li>提交事务</li>
<li>回滚事务</li>
</ol>
</li>
<li>使用Connection对象来管理事务<ul>
<li>开启事务：setAutoCommit(boolean autoCommit) ：调用该方法设置参数为false，即开启事务<ul>
<li>在执行sql之前开启事务</li>
</ul>
</li>
<li>提交事务：commit() <ul>
<li>当所有sql都执行完提交事务</li>
</ul>
</li>
<li>回滚事务：rollback() <ul>
<li>在catch中回滚事务</li>
</ul>
</li>
</ul>
</li>
</ol>
<pre><code class="java">        public class JDBCDemo10 &amp;#123;

        public static void main(String[] args) &amp;#123;
            Connection conn = null;
            PreparedStatement pstmt1 = null;
            PreparedStatement pstmt2 = null;

            try &amp;#123;
                //1.获取连接
                conn = JDBCUtils.getConnection();
                //开启事务
                conn.setAutoCommit(false);

                //2.定义sql
                //2.1 张三 - 500
                String sql1 = &quot;update account set balance = balance - ? where id = ?&quot;;
                //2.2 李四 + 500
                String sql2 = &quot;update account set balance = balance + ? where id = ?&quot;;
                //3.获取执行sql对象
                pstmt1 = conn.prepareStatement(sql1);
                pstmt2 = conn.prepareStatement(sql2);
                //4. 设置参数
                pstmt1.setDouble(1,500);
                pstmt1.setInt(2,1);

                pstmt2.setDouble(1,500);
                pstmt2.setInt(2,2);
                //5.执行sql
                pstmt1.executeUpdate();
                // 手动制造异常
                int i = 3/0;

                pstmt2.executeUpdate();
                //提交事务
                conn.commit();
            &amp;#125; catch (Exception e) &amp;#123;
                //事务回滚
                try &amp;#123;
                    if(conn != null) &amp;#123;
                        conn.rollback();
                    &amp;#125;
                &amp;#125; catch (SQLException e1) &amp;#123;
                    e1.printStackTrace();
                &amp;#125;
                e.printStackTrace();
            &amp;#125;finally &amp;#123;
                JDBCUtils.close(pstmt1,conn);
                JDBCUtils.close(pstmt2,null);
            &amp;#125;
        &amp;#125;

    &amp;#125;</code></pre>
<p>​        </p>
<h1 id="使用数据库连接池"><a href="#使用数据库连接池" class="headerlink" title="使用数据库连接池"></a>使用数据库连接池</h1><p>通常我们获取一个数据库连接对象，在使用后将其释放。这需要繁琐的申请与释放操作，而我们有更好的方案：即从数据库连接池处获取对象，在不使用的时候再将其归还到连接池中。</p>
<p>Druid：数据库连接池实现技术，由阿里巴巴提供的</p>
<p>操作步骤：</p>
<ol>
<li>导入jar包 </li>
<li>定义配置文件：以properties形式，可叫任意名称，可放在任意目录下。</li>
<li>加载配置文件。Properties</li>
<li>获取数据库连接池对象：通过工厂来来获取  DruidDataSourceFactory</li>
<li>获取连接：getConnection</li>
</ol>
<h2 id="导入并使用jar包"><a href="#导入并使用jar包" class="headerlink" title="导入并使用jar包"></a>导入并使用jar包</h2><blockquote>
<ol>
<li><img src="http://img.lbkzw.cn/img/20200918202606.png" alt="image-20200918202606795" style="zoom: 50%;" />
</li>
</ol>
</blockquote>
<blockquote>
<ol start="2">
<li><img src="http://img.lbkzw.cn/img/20200918202636.png" alt="image-20200918202636057" style="zoom:50%;" />
</li>
</ol>
</blockquote>
<h2 id="Properties文件配置"><a href="#Properties文件配置" class="headerlink" title="Properties文件配置"></a>Properties文件配置</h2><pre><code class="java">driverClassName=com.mysql.jdbc.Driver
url=jdbc:mysql://127.0.0.1:3306/db4
username=root
password=root
initialSize=1//初始数据库连接数
maxActive=10//最大数据库连接数
maxWait=3000</code></pre>
<h2 id="数据库连接池的工具类"><a href="#数据库连接池的工具类" class="headerlink" title="数据库连接池的工具类"></a>数据库连接池的工具类</h2><pre><code class="java">package cn.itcast.utils;

import com.alibaba.druid.pool.DruidDataSourceFactory;

import javax.sql.DataSource;
import java.io.IOException;
import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.Properties;

/**
 * Druid连接池的工具类
 */
public class JDBCUtils &amp;#123;

    //1.定义成员变量 DataSource
    private static DataSource ds ;

    static&amp;#123;
        try &amp;#123;
            //1.加载配置文件
            Properties pro = new Properties();
            pro.load(JDBCUtils.class.getClassLoader().getResourceAsStream(&quot;druid.properties&quot;));
            //2.获取DataSource
            ds = DruidDataSourceFactory.createDataSource(pro);
        &amp;#125; catch (IOException e) &amp;#123;
            e.printStackTrace();
        &amp;#125; catch (Exception e) &amp;#123;
            e.printStackTrace();
        &amp;#125;
    &amp;#125;

    /**
     * 获取连接
     */
    public static Connection getConnection() throws SQLException &amp;#123;
        return ds.getConnection();
    &amp;#125;

    /**
     * 释放资源
     */
    public static void close(Statement stmt,Connection conn)&amp;#123;
       /* if(stmt != null)&amp;#123;
            try &amp;#123;
                stmt.close();
            &amp;#125; catch (SQLException e) &amp;#123;
                e.printStackTrace();
            &amp;#125;
        &amp;#125;

        if(conn != null)&amp;#123;
            try &amp;#123;
                conn.close();//归还连接
            &amp;#125; catch (SQLException e) &amp;#123;
                e.printStackTrace();
            &amp;#125;
        &amp;#125;*/

       close(null,stmt,conn);
    &amp;#125;


    public static void close(ResultSet rs , Statement stmt, Connection conn)&amp;#123;


        if(rs != null)&amp;#123;
            try &amp;#123;
                rs.close();
            &amp;#125; catch (SQLException e) &amp;#123;
                e.printStackTrace();
            &amp;#125;
        &amp;#125;


        if(stmt != null)&amp;#123;
            try &amp;#123;
                stmt.close();
            &amp;#125; catch (SQLException e) &amp;#123;
                e.printStackTrace();
            &amp;#125;
        &amp;#125;

        if(conn != null)&amp;#123;
            try &amp;#123;
                conn.close();//归还连接
            &amp;#125; catch (SQLException e) &amp;#123;
                e.printStackTrace();
            &amp;#125;
        &amp;#125;
    &amp;#125;

    /**
     * 获取连接池方法
     */

    public static DataSource getDataSource()&amp;#123;
        return  ds;
    &amp;#125;

&amp;#125;</code></pre>
<p>使用连接池工具类</p>
<pre><code class="java">package cn.itcast.datasource.druid;

import cn.itcast.utils.JDBCUtils;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

/**
 * 使用新的工具类
 */
public class DruidDemo2 &amp;#123;

    public static void main(String[] args) &amp;#123;
        /*
         * 完成添加操作：给account表添加一条记录
         */
        Connection conn = null;
        PreparedStatement pstmt = null;
        try &amp;#123;
            //1.获取连接
            conn = JDBCUtils.getConnection();
            //2.定义sql
            String sql = &quot;insert into account values(null,?,?)&quot;;
            //3.获取pstmt对象
            pstmt = conn.prepareStatement(sql);
            //4.给？赋值
            pstmt.setString(1,&quot;王五&quot;);
            pstmt.setDouble(2,3000);
            //5.执行sql
            int count = pstmt.executeUpdate();
            System.out.println(count);
        &amp;#125; catch (SQLException e) &amp;#123;
            e.printStackTrace();
        &amp;#125;finally &amp;#123;
            //6. 释放资源
            JDBCUtils.close(pstmt,conn);
        &amp;#125;
    &amp;#125;

&amp;#125;</code></pre>
<h1 id="Spring-JDBC"><a href="#Spring-JDBC" class="headerlink" title="Spring JDBC"></a>Spring JDBC</h1><blockquote>
<p>Spring框架对JDBC的简单封装。提供了一个JDBCTemplate对象简化JDBC的开发</p>
</blockquote>
<p>步骤：</p>
<ol>
<li><p>导入jar包(注意版本要匹配，如mysql版本，数据库驱动版本等)</p>
</li>
<li><p>创建JdbcTemplate对象。依赖于数据源DataSource</p>
<ul>
<li>JdbcTemplate template = new JdbcTemplate(ds);</li>
</ul>
</li>
<li><p>调用JdbcTemplate的方法来完成CRUD的操作</p>
<ul>
<li>update():执行DML语句。增、删、改语句</li>
<li>queryForMap():查询结果将结果集封装为map集合，将列名作为key，将值作为value 将这条记录封装为一个map集合<ul>
<li>注意：这个方法查询的结果集长度只能是1</li>
</ul>
</li>
<li>queryForList():查询结果将结果集封装为list集合<ul>
<li>注意：将每一条记录封装为一个Map集合，再将Map集合装载到List集合中</li>
</ul>
</li>
<li>query():查询结果，将结果封装为JavaBean对象<ul>
<li>query的参数：RowMapper<ul>
<li>一般我们使用BeanPropertyRowMapper实现类。可以完成数据到JavaBean的自动封装</li>
<li>new BeanPropertyRowMapper&lt;类型&gt;(类型.class)</li>
</ul>
</li>
</ul>
</li>
<li>queryForObject：查询结果，将结果封装为对象<ul>
<li>一般用于聚合函数的查询</li>
</ul>
</li>
</ul>
</li>
</ol>
<pre><code class="java">import cn.itcast.domain.Emp;
            import cn.itcast.utils.JDBCUtils;
            import org.junit.Test;
            import org.springframework.jdbc.core.BeanPropertyRowMapper;
            import org.springframework.jdbc.core.JdbcTemplate;
            import org.springframework.jdbc.core.RowMapper;

            import java.sql.Date;
            import java.sql.ResultSet;
            import java.sql.SQLException;
            import java.util.List;
            import java.util.Map;

            public class JdbcTemplateDemo2 &amp;#123;

                //Junit单元测试，可以让方法独立执行
                                //1. 获取JDBCTemplate对象
                private JdbcTemplate template = new JdbcTemplate(JDBCUtils.getDataSource());
                /**
                 * 1. 修改1号数据的 salary 为 10000
                 */
                @Test
                public void test1()&amp;#123;

                    //2. 定义sql
                    String sql = &quot;update emp set salary = 10000 where id = 1001&quot;;
                    //3. 执行sql
                    int count = template.update(sql);
                    System.out.println(count);
                &amp;#125;

                /**
                 * 2. 添加一条记录
                 */
                @Test
                public void test2()&amp;#123;
                    String sql = &quot;insert into emp(id,ename,dept_id) values(?,?,?)&quot;;
                    int count = template.update(sql, 1015, &quot;郭靖&quot;, 10);
                    System.out.println(count);

                &amp;#125;

                /**
                 * 3.删除刚才添加的记录
                 */
                @Test
                public void test3()&amp;#123;
                    String sql = &quot;delete from emp where id = ?&quot;;
                    int count = template.update(sql, 1015);
                    System.out.println(count);
                &amp;#125;

                /**
                 * 4.查询id为1001的记录，将其封装为Map集合
                 * 注意：这个方法查询的结果集长度只能是1
                 */
                @Test
                public void test4()&amp;#123;
                    String sql = &quot;select * from emp where id = ? or id = ?&quot;;
                    Map&lt;String, Object&gt; map = template.queryForMap(sql, 1001,1002);
                    System.out.println(map);
                    //&amp;#123;id=1001, ename=孙悟空, job_id=4, mgr=1004, joindate=2000-12-17, salary=10000.00, bonus=null, dept_id=20&amp;#125;

                &amp;#125;

                /**
                 * 5. 查询所有记录，将其封装为List
                 */
                @Test
                public void test5()&amp;#123;
                    String sql = &quot;select * from emp&quot;;
                    List&lt;Map&lt;String, Object&gt;&gt; list = template.queryForList(sql);

                    for (Map&lt;String, Object&gt; stringObjectMap : list) &amp;#123;
                        System.out.println(stringObjectMap);
                    &amp;#125;
                &amp;#125;

                /**
                 * 6. 查询所有记录，将其封装为Emp对象的List集合
                 */

                @Test
                public void test6()&amp;#123;
                    String sql = &quot;select * from emp&quot;;
                    List&lt;Emp&gt; list = template.query(sql, new RowMapper&lt;Emp&gt;() &amp;#123;

                        @Override
                        public Emp mapRow(ResultSet rs, int i) throws SQLException &amp;#123;
                            Emp emp = new Emp();
                            int id = rs.getInt(&quot;id&quot;);
                            String ename = rs.getString(&quot;ename&quot;);
                            int job_id = rs.getInt(&quot;job_id&quot;);
                            int mgr = rs.getInt(&quot;mgr&quot;);
                            Date joindate = rs.getDate(&quot;joindate&quot;);
                            double salary = rs.getDouble(&quot;salary&quot;);
                            double bonus = rs.getDouble(&quot;bonus&quot;);
                            int dept_id = rs.getInt(&quot;dept_id&quot;);

                            emp.setId(id);
                            emp.setEname(ename);
                            emp.setJob_id(job_id);
                            emp.setMgr(mgr);
                            emp.setJoindate(joindate);
                            emp.setSalary(salary);
                            emp.setBonus(bonus);
                            emp.setDept_id(dept_id);

                            return emp;
                        &amp;#125;
                    &amp;#125;);
                                        for (Emp emp : list) &amp;#123;
                        System.out.println(emp);
                    &amp;#125;
                &amp;#125;

                /**
                 * 6. 查询所有记录，将其封装为Emp对象的List集合
                 */

                @Test
                public void test6_2()&amp;#123;
                    String sql = &quot;select * from emp&quot;;
                    List&lt;Emp&gt; list = template.query(sql, new BeanPropertyRowMapper&lt;Emp&gt;(Emp.class));
                    for (Emp emp : list) &amp;#123;
                        System.out.println(emp);
                    &amp;#125;
                &amp;#125;

                /**
                 * 7. 查询总记录数
                 */

                @Test
                public void test7()&amp;#123;
                    String sql = &quot;select count(id) from emp&quot;;
                    Long total = template.queryForObject(sql, Long.class);
                    System.out.println(total);
                &amp;#125;

            &amp;#125;</code></pre>

    </div>

    
</div>
                     
<footer id="footer">
    <div class="footer-wrap">
        <div>
            © 2020 - 2021 ITthreeの博客
            <span class="footer-icon">
                <a-icon type="flag" theme="filled" /></span>
            @ITthree
        </div>
        <div></div>
        <div>Based on the <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo Engine</a> & <a
                target="_blank" rel="noopener" href="https://github.com/korilin/hexo-theme-particle">Particle Theme</a></div>
        
    </div>

</footer>

<script src="/js/highlight.min.js"></script>
<script src="/js/particle.js"></script>
                </div>
            </div>
        </transition>
    </div>

    <script>
    new Vue({
        el: "#layout",
        data: {
            show_page: false,
            onload_menu: false,
            menu_show: false,
            card_top: 100
        },
        created: function () {
            var that = this
            window.onload = function () {
                that.show_page = true
                document.getElementById("loadcontent").style.opacity = 0
                setTimeout(function () {
                    document.getElementById("loadleft").style.width = 0
                    document.getElementById("loadright").style.width = 0
                }, 300)
                setTimeout(function () {
                    document.getElementById("loading").style = "display:none"
                }, 600)
            }
        },
        mounted: function () {
            var that = this
            window.addEventListener('scroll', function (e) {
                that.menu_show = false
            })
        },
        methods: {
            home_click: function () {
                window.scrollTo({
                    top: window.innerHeight - 80,
                    behavior: "smooth",
                });
            }
        }
    })
</script>

</body>

</html>